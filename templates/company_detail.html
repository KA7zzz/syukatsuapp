{% extends "base.html" %}

{% block title %}{{ company.name }} 詳細 - 就活管理アプリ{% endblock %}

{% block content %}
    <h2>{{ company.name }} の詳細情報</h2>
    <p><a href="{{ url_for('dashboard') }}">ダッシュボードに戻る</a></p>

    <div class="display-section">
        <div class="detail-box">
            <h3>基本情報</h3>
            <table class="responsive-table">
                <tr><th data-label="項目">企業名</th><td data-label="内容">{{ company.name }}</td></tr>
                <tr><th data-label="項目">業界</th><td data-label="内容">{{ company.industry or '未設定' }}</td></tr>
                <tr><th data-label="項目">URL</th><td data-label="内容"><a href="{{ company.url }}" target="_blank">{{ company.url }}</a></td></tr>
                <tr><th data-label="項目">応募日</th><td data-label="内容">{{ company.application_date or '未設定' }}</td></tr>
                <tr><th data-label="項目">選考段階</th><td data-label="内容">{{ company.selection_stage or '未設定' }}</td></tr>
                <tr><th data-label="項目">結果</th><td data-label="内容">{{ company.result or '未設定' }}</td></tr>
                <tr><th data-label="項目">メモ</th><td data-label="内容">{{ company.notes or '' }}</td></tr>
            </table>
        </div>

        <div class="detail-box">
            <h3>面接スケジュール</h3>
            {% if interviews %}
                <table class="responsive-table">
                    <thead><tr><th>日時</th><th>場所</th><th>担当者</th><th>URL</th><th>メモ</th></tr></thead>
                    <tbody>
                        {% for interview in interviews %}
                        <tr>
                            <td data-label="日時">{{ interview.date_time }}</td>
                            <td data-label="場所">{{ interview.location }}</td>
                            <td data-label="担当者">{{ interview.person }}</td>
                            <td data-label="URL"><a href="{{ interview.url }}" target="_blank">{{ interview.url }}</a></td>
                            <td data-label="メモ">{{ interview.notes }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% else %}
                <p>面接情報はありません。</p>
            {% endif %}
        </div>
        </div>

    <hr>

    <div class="action-section">
        </div>

    <style>
        .detail-box, .form-box { background-color: #fff; padding: 15px; margin-bottom: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        h3 { margin-top: 0; border-bottom: 2px solid #007bff; padding-bottom: 5px; margin-bottom: 10px; }
        .form-box input, .form-box textarea { width: 95%; padding: 8px; margin: 5px 0; border-radius: 4px; border: 1px solid #ccc; }

        /* PC用のテーブルスタイル */
        .responsive-table { width: 100%; border-collapse: collapse; }
        .responsive-table th, .responsive-table td { padding: 8px; text-align: left; border-bottom: 1px solid #ddd; }
        .responsive-table thead th { background-color: #e9ecef; }
        
        /* --- スマホ用のメディアクエリ --- */
        @media (max-width: 768px) {
            .responsive-table thead {
                /* PCでは表示されているヘッダーをスマホでは非表示に */
                display: none;
            }
            .responsive-table, .responsive-table tbody, .responsive-table tr, .responsive-table td {
                display: block;
                width: 100%;
            }
            .responsive-table tr {
                margin-bottom: 15px;
                border: 1px solid #ddd;
                border-radius: 5px;
            }
            .responsive-table td {
                text-align: right; /* 内容を右寄せに */
                padding-left: 50%; /* 左側にラベルを表示するスペースを確保 */
                position: relative;
                border-bottom: 1px solid #eee;
            }
            .responsive-table td:before {
                /* data-labelの内容（ヘッダーテキスト）を左側に表示 */
                content: attr(data-label);
                position: absolute;
                left: 10px;
                width: 45%;
                padding-right: 10px;
                text-align: left;
                font-weight: bold;
            }
        }
    </style>
{% endblock %}